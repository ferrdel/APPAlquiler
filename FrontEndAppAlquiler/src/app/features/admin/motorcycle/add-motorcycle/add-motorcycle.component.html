<div class="container my-3">

    <!-- spinner-->
    <shared-loading-spinner *ngIf="isLoading;else showForm"></shared-loading-spinner>

    <ng-template #showForm>
        <h2>Motorcycle</h2>
        <hr>
        
        <form class="mt-3 col-md-6" [formGroup]="miFormulario" (ngSubmit)="onSubmit()">                
            <!--ID-->
            <div class="mb-3" hidden>
                <label for="idVehiculo" class="form-label">Id</label>
                <input type="text" class="form-control" id="idVehiculo" formControlName="id">        
                <span *ngIf="hasErrorsAndTouched('id')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('id')}}
                </span>
            </div>
            
            <!--DESCRIPTION-->
            <div class="mb-3">
                <label for="descripcion" class="form-label">Description</label>
                <textarea class="form-control" name="descripcion" id="descripcion" formControlName="description"></textarea>        
                <span *ngIf="hasErrorsAndTouched('description')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('description')}}
                </span>
            </div>

            <!--IMAGE-->
            <div class="mb-3">
                <label for="image" class="form-label">Image</label>
                <input type="text" class="form-control" name="image" id="image" formControlName="image">
                <span *ngIf="hasErrorsAndTouched('image')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('image')}}
                </span>
            </div>
        
            <!--STATE-->    
            <div class="mb-3">
                <label for="estado" class="form-label">State</label>        
                <select class="form-select" aria-label="Default select example" formControlName="state" id="state">            
                    <option value="">-- Seleccione Estado --</option>
                    <option *ngFor="let estado of estados"  [value]="estado[0]">{{estado[1]}}</option>            
                </select>
                <span *ngIf="hasErrorsAndTouched('state')" class="form-text text-danger">
                    <!--mensaje de error-->
                    {{getFieldError('state')}}
                </span>
            </div>   
                                
            <!--BRAND-->
            <div class="mb-3">
                <label for="marca" class="form-label">Brand</label>        
                <select class="form-select" aria-label="Default select example" formControlName="brandId" id="marca" (change)="onOptionChange()">            
                    <option value="">-- Seleccione Marca --</option>
                    <option *ngFor="let marca of marcas"  value="{{marca.id}}">{{marca.name}}</option>            
                </select>
                <span *ngIf="hasErrorsAndTouched('brandId')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('brandId')}}
                </span>
            </div>

            <!--MODEL-->
            <div class="mb-3" *ngIf="showModels">
                <label for="modelo" class="form-label">Model</label>        
                <select class="form-select" aria-label="Default select example" formControlName="modelId" id="modelo">            
                    <option value="">-- Seleccione Modelo --</option>
                    <option *ngFor="let modelo of modelos"  value="{{modelo.id}}">{{modelo.name}}</option>            
                </select>
                <span *ngIf="hasErrorsAndTouched('modelId')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('modelId')}}
                </span>
            </div>
            
            <!--ABS-->
            <div class="form-check form-switch mb-3">
                <input class="form-check-input" type="checkbox" role="switch" id="abs" formControlName="abs">
                <label class="form-check-label" for="abs">ABS</label>
                <span *ngIf="hasErrorsAndTouched('abs')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('abs')}}
                </span>
            </div>

            <!--CILINDRADAS-->
            <div class="mb-3">
                <label for="cilindrada" class="form-label">Cilindrada</label>
                <input type="number" class="form-control" id="cilindrada" min="1" formControlName="cilindrada">                     
                <span *ngIf="hasErrorsAndTouched('cilindrada')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('cilindrada')}}
                </span>
            </div>

            <!--TYPO DE MOTOS--> 
            <div class="mb-3">
                <label for="tipo" class="form-label">Type Motorcycle</label>        
                <select class="form-select" aria-label="Default select example" formControlName="typeMotorcycleId" id="tipo" (change)="onOptionChange()">            
                    <option value="">-- Seleccione Marca --</option>
                    <option *ngFor="let tipo of typeMotos"  value="{{tipo.id}}">{{tipo.name}}</option>            
                </select>
                <span *ngIf="hasErrorsAndTouched('typeMotorcycleId')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('typeMotorcycleId')}}
                </span>
            </div>
                   
                                                    
            <!--PRICE-->
            <div class="mb-3">
                <label for="precio" class="form-label">Price</label>
                <input type="number" class="form-control" id="precio" min="1" formControlName="price">                     
                <span *ngIf="hasErrorsAndTouched('price')" class="form-text text-danger">
                    <!-- mensaje de error -->
                    {{getFieldError('price')}}
                </span>
            </div>
            
                
            <button type="submit" class="btn btn-primary mb-3">Submit</button>

            <button type="button" class="btn btn-secondary ms-3 mb-3" [routerLink]="['/']">Cancel</button>
        </form>
    </ng-template>
</div>